# Что обязательно нужно сделать


## Общее

- Устанавливать "Проверку заполнения" или аналоги для ключевых реквизитов и табличных частей/измерений
- Установка флагов на запись движений:
	- Для старой методики: в самом начале "Записывать = Истина" + "Записать()" + "Записывать = Истина"
	- Для новой: "Записывать = Истина" + "Записать()" (после формирования предварительных движений)
- Блокировки:
	- Для старой методики: с помощью блокировки данных, до запроса
	- Для новой: с помощью "БлокироватьДляИзменения", после предварительной записи в регистр, до контроля отрицательных остатков
- На какую дату брать данные из регистров при списании:
	- Для старой методики: "МоментВремени()"
	- Для новой: формирование движение - "Дата", контроль остатков - `Новый Граница(МоментВремени(), ВидГраницы.Включая)`
- Индексация таблиц - для полей левого соединения или полей типа `Номенклатура В (Выбрать Т.Номенклатура из втТЧТовары КАК Т))`
- Вытягивать представление номенклатуры и пр., а не обращаться в цикле (чаще всего сообщениях) по ссылке
- Проблема копеек: проверяем на полное/последнее списание
- ЕСТЬNULL для левых и полных соединений для числовых значений (т.к. с ними будут арифметические операции)
- Если делать левое соединение, и по правой таблице делать отбор, то соединение становится внутренним (леонтьев, занятие 23, примерно 12 минута). 
	- Чтобы соединение осталось левым, надо прописать отбор в условии соединения
	- Иногда условие в объединении не приносит результата, нужно делать временные таблицы и соединяться по ним


## ОУ

- Себестоимость и распределение денег по какому-либо порядку (фифо/лифо, по партиям, проектам и пр.) считается по `старой методике`. Просто списания (отдельно от расчета себестоимости/распредения) можно расчитывать по новой
- Если остатки ведутся в одном разрезе (например, партия), а отчет по продажам явно не использует такие же разрезы (не использует партию) + не нужны начальный и конечный остатки, то для продаж надо создавать `отдельный оборотный регистр`.
- В остатках номенклатуры нет услуг (и быть не должно), в отчете по продажам есть


## БУ

- План счетов "Управленческий" (в каркасной конфигурации уже есть)
	- На вкладке "Субконто" указать "Виды субконто" - план видов характеристик "ВидыСубконто" (в каркасной конфигурации уже есть)
	- Указываем максимальное количество субконто (по необходимости, но больше 3 максимальное не рекомендуется)
	- Признаки учета (флажок для всего счета). Связывается в ресурсами регистра бухгалтерии через "Параметры субконто"
	- Признаки учета субконто (флажок для субконто)
- Заполняем [регистр бухгалтерии](/05%20как%20заполнить%20регистр%20бухгалтерии.md)
- Сделать документ ["Операция"](/04%20как%20создать%20документ%20Операция%20или%20ее%20аналоги.md)
- В блокировках обязательно указывать счет
- В запросах обязательно указывать виды субконто, если два соединения с регистром бухгалтерии - 2 разных массива субконто
- В запросах в отчетах (по оборотам) - дополнительно корреспондирующие счета
- При обращении к субконто через точку (или в отчете СКД) выражать субконто к конкретному типу


## СПР

- Заполняем [регистры расчета](/06%20как%20заполнить%20планы%20и%20регистры%20расчета.md)
- Обработка `Графики работы`:
	- В ней есть 2 цикла, убираем первый (он изменяет существующие записи). Без певрого цикла будет легче исправлять обработку для условий, которые указаны в задаче (график работы, дни и пр.)
- Если вылезла ошибка (Необходим пересчет фактического периода действия):
	- Такое возникает, если перезаписываются измерения
- Измерения выставлять как базовые, если они используются для получения базы (т.е. на основе чего считается премия, больничный и пр.) 
